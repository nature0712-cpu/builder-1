<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</title>

  <style>
    :root{
      --bg:#0b1020;
      --card:#121a33;
      --text:#e8ecff;
      --muted:#a7b0d6;
      --btn:#4b63ff;
      --btn2:#2a355f;
      --danger:#ff4d6d;
    }

    *{ box-sizing:border-box }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
      background: radial-gradient(1200px 600px at 30% 10%, #1a2a7a 0%, transparent 60%),
                  radial-gradient(1000px 500px at 70% 30%, #3a0b5f 0%, transparent 55%),
                  var(--bg);
      color:var(--text);
      padding:24px;
    }

    .wrap{
      width:min(920px,100%);
      display:grid;
      gap:16px;
      grid-template-columns: 1.2fr .8fr;
    }

    @media(max-width:860px){
      .wrap{ grid-template-columns:1fr }
    }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border-radius:16px;
      padding:20px;
      border:1px solid rgba(255,255,255,.1);
    }

    h1{ margin:0 0 8px }
    .sub{ font-size:13px; color:var(--muted); line-height:1.5 }

    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    button{
      border:0;
      cursor:pointer;
      padding:10px 14px;
      border-radius:12px;
      font-weight:700;
      color:var(--text);
      background:var(--btn);
    }

    button.secondary{ background:var(--btn2) }
    button.danger{ background:var(--danger) }
    button:disabled{ opacity:.5 }

    .hr{
      height:1px;
      background:rgba(255,255,255,.1);
      margin:16px 0;
    }

    /* âœ… ë²ˆí˜¸ í‘œì‹œ ì˜ì—­ (ì¤‘ì•™ ì •ë ¬) */
    .balls{
      min-height:120px;
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      align-items:center;
      justify-content:center;
    }

    /* âœ… ë²ˆí˜¸ ê³µ */
    .ball{
      width:46px;
      height:46px;
      border-radius:50%;
      display:flex;
      justify-content:center;
      align-items:center;
      font-weight:900;

      /* ğŸ”¥ í•µì‹¬ ìˆ˜ì • */
      color:#000;                 /* ìˆ«ì ê²€ì€ìƒ‰ */
      text-shadow:none;           /* ê°€ë…ì„± ë°©í•´ ìš”ì†Œ ì œê±° */

      box-shadow:0 8px 18px rgba(0,0,0,.35);
      border:2px solid rgba(255,255,255,.2);
    }

    .ball.sm{
      width:30px;
      height:30px;
      font-size:13px;
      border-width:1px;
      box-shadow:none;
    }

    /* ìƒ‰ìƒ êµ¬ê°„ */
    .r1{ background:#ffd500 }
    .r2{ background:#59c7ff }
    .r3{ background:#38d660 }
    .r4{ background:#ff5a5a }
    .r5{ background:#b184ff }

    /* ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes rollIn{
      0%{ transform:translateX(-140px) rotate(0deg) scale(.6); opacity:0 }
      70%{ transform:translateX(10px) rotate(520deg) scale(1.05); opacity:1 }
      100%{ transform:translateX(0) rotate(720deg) scale(1); }
    }

    .roll{ animation:rollIn .6s cubic-bezier(.25,.8,.25,1) }

    .historyHeader{
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .historyList{
      margin-top:12px;
      display:grid;
      gap:10px;
    }

    .histItem{
      background:rgba(0,0,0,.2);
      padding:10px;
      border-radius:12px;
    }

    .histTime{
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
    }

    .histBalls{
      display:flex;
      gap:6px;
      align-items:center;
      flex-wrap:wrap;
    }
  </style>
</head>

<body>
<div class="wrap">

  <!-- ë©”ì¸ -->
  <div class="card">
    <h1>ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</h1>
    <p class="sub">
      ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ 6ê°œ + ë³´ë„ˆìŠ¤ 1ê°œê°€ ìƒì„±ë¼ìš” (ì¤‘ë³µ ì—†ìŒ)<br>
      ê³µ ìƒ‰ìƒ: 1â€“10 / 11â€“20 / 21â€“30 / 31â€“40 / 41â€“45
    </p>

    <div class="row">
      <button id="drawBtn">ë²ˆí˜¸ ë½‘ê¸°</button>
      <button id="copyBtn" class="secondary" disabled>í˜„ì¬ ë²ˆí˜¸ ë³µì‚¬</button>
      <span class="sub">ê¸°ë¡: ìµœì‹  3ê°œ</span>
    </div>

    <div class="hr"></div>

    <div id="balls" class="balls"></div>
  </div>

  <!-- ê¸°ë¡ -->
  <div class="card">
    <div class="historyHeader">
      <h3>ìµœê·¼ ë²ˆí˜¸</h3>
      <button id="clearBtn" class="danger">ì§€ìš°ê¸°</button>
    </div>
    <div id="history" class="historyList"></div>
  </div>

</div>

<script>
  const ballsEl = document.getElementById("balls");
  const historyEl = document.getElementById("history");
  const drawBtn = document.getElementById("drawBtn");
  const copyBtn = document.getElementById("copyBtn");
  const clearBtn = document.getElementById("clearBtn");

  const STORAGE = "lotto_history_center";
  const MAX = 3;

  let current = null;
  let history = JSON.parse(localStorage.getItem(STORAGE) || "[]");

  function rangeClass(n){
    if(n<=10) return "r1";
    if(n<=20) return "r2";
    if(n<=30) return "r3";
    if(n<=40) return "r4";
    return "r5";
  }

  function generate(){
    const nums=[];
    while(nums.length<7){
      const n=Math.floor(Math.random()*45)+1;
      if(!nums.includes(n)) nums.push(n);
    }
    return { main:nums.slice(0,6).sort((a,b)=>a-b), bonus:nums[6] };
  }

  function renderCurrent(){
    ballsEl.innerHTML="";
    copyBtn.disabled=true;

    const all=[...current.main, "+", current.bonus];

    all.forEach((v,i)=>{
      setTimeout(()=>{
        if(v==="+"){
          const p=document.createElement("div");
          p.textContent="+";
          p.style.fontWeight="900";
          ballsEl.appendChild(p);
          return;
        }
        const b=document.createElement("div");
        b.className=`ball ${rangeClass(v)} roll`;
        b.textContent=v;
        ballsEl.appendChild(b);
        if(i===all.length-1) copyBtn.disabled=false;
      }, i*130);
    });
  }

  function saveHistory(){
    localStorage.setItem(STORAGE, JSON.stringify(history));
  }

  function renderHistory(){
    historyEl.innerHTML="";
    history.forEach(h=>{
      const item=document.createElement("div");
      item.className="histItem";
      item.innerHTML=`<div class="histTime">${h.time}</div>`;
      const row=document.createElement("div");
      row.className="histBalls";

      h.main.forEach(n=>{
        const b=document.createElement("div");
        b.className=`ball sm ${rangeClass(n)}`;
        b.textContent=n;
        row.appendChild(b);
      });

      const bb=document.createElement("div");
      bb.className=`ball sm ${rangeClass(h.bonus)}`;
      bb.textContent=h.bonus;
      row.appendChild(bb);

      item.appendChild(row);
      historyEl.appendChild(item);
    });
  }

  drawBtn.onclick=()=>{
    current=generate();
    renderCurrent();
    history.unshift({ ...current, time:new Date().toLocaleString() });
    history=history.slice(0,MAX);
    saveHistory();
    renderHistory();
  };

  copyBtn.onclick=()=>{
    navigator.clipboard.writeText(
      `${current.main.join(" ")} + ${current.bonus}`
    );
  };

  clearBtn.onclick=()=>{
    history=[];
    saveHistory();
    renderHistory();
  };

  renderHistory();
</script>
</body>
</html>
